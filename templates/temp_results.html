
<!DOCTYPE html>
<!-- iCardio.ai -->
<html style="height:100%;overscroll-behavior: none;">

<head>
    
    {% load static %}
     <link type="text/css" rel="stylesheet" href="{% static '../static/css/custom.css' %}" media="screen,projection" />
         <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="{% static '../static/css/materialize.css' %}"  media="screen,projection" />
    <title>iCardio.ai</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
    <div class="main-wrapper">
    <header class="custom-nav">
        <h5 class="loader typewriter" id="typewriter">username: {{user.username}}</h5>
        <a href="{% url 'upload' %}">upload more files</a>
    </header>

{% for result in results.result %}
    <div class="table-wrapper">
        <div class="item-wrap">
    <ul>
        
        <li> <span> Filename: </span> <span> {{ result.file_name }}</span> </li>
        <li> <span> Usable View: </span> <span> {{ result.view.usable_view }}</span> </li> 
        <li> <span> Predicted View: </span> <span> {{ result.view.predicted_view }}</span> </li>
        <li> <span> View Confidence: </span> <span> {{ result.view.view_confidence|floatformat:2  }}</span> </li>
        <li> <span> View Model Type: </span> <span> {{ result.view.view_model_type }}</span> </li>
        <li> <span> Predicted Abnormality: </span><span> {{ result.view.predicted_abnormality }}</span> </li> 
        <li> <span> Abnormality Confidence: </span> <span> {{ result.view.abnormality_confidence|floatformat:2 }}</span> </li>
        <li> <span> Binary Model Type: </span> <span> {{ result.view.binary_model_type }}</span> </li>
        <li>
            <span><button id="myBtn">Details</button></span>
            <section id="myModal" class="pop-up">
                <section class="modal-content">
                    <span class="close">&times;</span>
                    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit,
                    sed diam nonummy nibh euismod tincidunt ut laoreet dolore
                    magna aliquam erat volutpat. Ut wisi enim ad minim veniam,
                    quis nostrud exerci tation ullamcorper suscipit lobortis nisl
                    ut aliquip ex ea commodo consequat. Duis autem vel eum iriure
                    dolor in hendrerit in vulputate velit esse molestie consequat,
                    vel illum dolore eu feugiat nulla facilisis at vero eros et
                    accumsan et.</p>
                </section>
            </section>
        </li>
        
        
    </ul>
    </div>
    <div class="vid-wrapper">
    <video type="video/mp4" loop="" controls="true" width="360px" height="480px" autoplay="" class="analysis-img fb614a" src="{{result.links.webm}}" data-id="fb614a"> </video> </br>
    </div>
</div>
{% endfor %} 
</div>

<script>

var json_object = {
    "Left Ventricle": [
      "Diastolic dysfunction.",
      "Focal upper septal hypertrophy.",
      "Left ventricular diastolic function.",
      "Left ventricular hypertrophy.",
      "Left ventricular enlargement.",
      "Paradoxical septal motion consistent with  history of CABG.",
      "Septal hypokinesis."
    ],
    "Left Atrium": [
      "Hypermobile interatrial septum.",
      "Left atrial dilation.",
      "Left atrial elongation.",
      "Left atrial enlargement.",
      "Lipomatous hypertrophy of the interatrial septum."
    ],
    "Right Ventricle": [
      "Right ventricular enlargement."
    ],
    "Aortic Valve": [
      "Aortic insufficiency.",
      "Aortic regurgitation.",
      "Aortic sclerosis.",
      "Aortic valve is trileaflet and thickened.",
      "Calcification of the aortic leaflets with decreased excursion.",
      "Calcification of the aortic leaflets with preserved excursion.",
      "Elevated aortic outflow velocities."
    ],
    "Mitral Valve": [
      "Mitral regurgitation.",
      "Mitral valve insufficiency.",
      "Mitral valve prolapse.",
      "Mitral valve sclerosis without prolapse.",
      "Posterior mitral annular calcification.",
      "Thickening of the mitral leaflets with preserved excursion."
    ],
    "Aortic Root": [
      "Aortic root dilation.",
      "Aortic root enlargement.",
      "Enalargement at the Sinus of Valsalva."
    ],
    "Pericardium": [
      "Anterior pericardial fat pad.",
      "Circumferential pericardial fat pad.",
      "Pericardial effusion."
    ]
  }


    const modal = document.getElementById("myModal");
const btn = document.getElementById("myBtn")
const close = document.getElementsByClassName("close")[0];

btn.onclick = function(){
    modal.style.display = "flex"
    console.log("okay!!")
}

close.onclick = function(){
    modal.style.display = "none"
} 

window.onclick = function(event){
    if(event.target == modal){
        modal.style.display = "none"
    }
}
</script>

<script>

   
// set up text to print, each item in array is new line
//var set = new Array(
//"There are only 10 types of people in the world:", 
//"Those who understand binary, and those who don't"
//);
var setData = "username: {{user.username}}"
var iSpeed = 10; // time delay of print out
var iIndex = 0; // start printing array at this posision
var iArrLength = setData.length; // the length of the text array
var iScrollAt = 20; // start scrolling up at this many lines
var shouldChange = 1;
var iTextPos = 0; // initialise text position
var sContents = ''; // initialise contents variable
var iRow; // initialise current row
var shouldStop = 0;

function typewriter()
{
 if(shouldChange == 1)
 {
	 iIndex = 0; 
	 iArrLength = setData.length; 
	 iScrollAt = 20; 
	 shouldChange = 0;
	 iTextPos = 0; 
 }
 if(shouldStop == 1)
 return;

 sContents = ' ';
 iRow = Math.max(0, iIndex-iScrollAt);
 var destination = document.getElementById("typewriter");
 
// while ( iRow < iIndex ) {
//  sContents += aText[iRow++] + '<br />';
// }
 destination.innerHTML = sContents + setData.substring(0, iTextPos) + "";
 if ( iTextPos++ == iArrLength ) {
  iTextPos = 0;
  iIndex++;
  shouldStop = 1;
//  debugger;
 // if ( iIndex != aText.length ) {
   iArrLength = setData.length;
   
   //setTimeout("typewriter()", 500);
   //}

}
}
    setInterval(function() {
     typewriter();
	 }, 50);

    
</script>

</body>
